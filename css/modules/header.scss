$header-bg-color: #012;

#header {
	@include section();

	// Remove @secion clearfix (no good with flexbox)
	&:after {
		display: none;
	}

	// Custom paddings from other @sections
	padding-top: 10px;
	padding-bottom: 10px;

	// Background color, shadow
//	background: linear-gradient(180deg, rgba($header-bg-color, .8) 50%, rgba($header-bg-color, .85) 50%, rgba($header-bg-color, .9));
	background: rgba($header-bg-color, .8);
//	background: linear-gradient(140deg, rgba($header-bg-color, .75) 30%, lighten(rgba($header-bg-color, .75), 25%) 40%, lighten(rgba($header-bg-color, .75), 25%) 60%, rgba($header-bg-color, .75) 70%);

	box-shadow: 0 2px 2px $shadow-color;

	// Some nice text
	color: $white-color;
	text-shadow: -1px -1px 1px rgba(60, 60, 60, .4);

	// Fixed header
	position: fixed;
	left: 0;
	top: 0;
	z-index: 99;

	width: 100%;
	box-sizing: border-box; // Otherwise section()'s padding will fuck the size up

	// Flexbox!!
	@media #{$bp-3} {
		@include flexbox;
		@include justify-content(space-between);
		@include align-items(center);
	}

	// We'll adjust its size later
	transition: padding-top .1s ease-out, padding-bottom .1s ease-out, transform .2s ease-out;

	// Logo
	h1, 
	p.logo {
		@include heading($h3-size);
		font-size: $h3-size !important; // Because @heading adjusts the size based on resolution - we don't want that in this case
		margin: 0;
		transition: font-size .1s ease-out;

		// Neutral link
		a {
			color: $white-color;

			&:hover {
				text-decoration: none;
			}

			// I'm Andreas
			strong {
				font-weight: lighter;
				color: $link-color;
			}

			// Tagline
			small {
				@include body-text;
				line-height: 1.4;
				letter-spacing: 0;
				color: rgba($white-color, .8);
				overflow: hidden;
				font-size: $default-size * .8;

				// Hide tagline for now
				max-height: 0;
				transition: max-height .1s ease-out;
			}

			// Hover
			&:hover {
				strong {
					&:first-letter {
						color: red;
					}
				}
			}
		}
	}

	// Navigation
	div.widget_nav_menu {
		margin: 0;

		ul {
			margin: 0;
			list-style: none;

			li {
				display: inline-block;
				margin: 0 10px 0 0;
				cursor: pointer; // Pretend it's a link (we make it clickable with JS)

				@media #{$bp-3} {
					margin: 0 0 0 20px;
				}

				a {
					position: relative;

					font-size: $default-size * .8;
					text-transform: uppercase;
					color: rgba($white-color, .8);
					text-decoration: none;
					text-shadow: none;

					&:hover, 
					&:active {
						color: $white-color;
					}

					// Underline
					&:before, 
					&:after {
						background: rgba($white-color, .8);

						display: block;
						content: "";

						position: absolute;
						left: 50%;
						bottom: -10px;

						width: 0;
						height: 5px;

						transition: width .1s ease-out, left .1s ease-out;
					}

					&:before {
					//	border-radius: 2px 0 0 2px;
					}

					&:after {
					//	border-radius: 0 2px 2px 0;
					}
				}

				// Hover border
				&.active a, 
				&:hover a {
					&:before {
						left: 0;
						width: 50%;
					}

					&:after {
						width: 50%;
					}
				}
			}
		}
	}

	// Search
	div.widget_search {
		display: none;

		form {
			p {
				margin: 0;

				input[type=search] {
				}
			}
		}
	}
}

// In hi res - when user hasn't scrolled down - display a larger header with tagline
@media #{$bp-3} {
	body:not(.has-scrolled) #header {
		padding-top: 20px;
		padding-bottom: 20px;

		h1, 
		p.logo {
		//	font-size: $h2-size !important;

			a {
				small {
					max-height: 30px;
				}
			}
		}
	}
}

// Menu de la hamburguesa
@media #{$bp-3-max} {
	body.has-scrolled.scrolling-down #header {
		transform: translateY(-100%);
	}
}

// New styling for menu (can be commented to get the old version)
@media #{$bp-3} {
	#header {
		display: block;
		height: 55px;
		transition: height .1s ease-out;

		padding-top: 0;
		padding-bottom: 0;

		h1, 
		p.logo {
			float: left;
			height: 100%;

		  -webkit-transform-style: preserve-3d; // Fix potential bluriness
		  -moz-transform-style: preserve-3d;
		  transform-style: preserve-3d;

			a {
				display: block;
				position: relative;
				top: 50%;
				transform: translateY(-50%);
			}
		}

		div.widget_nav_menu {
			float: right;
			height: 100%;

			ul {
				display: table;
				height: 100%;

				li {
					display: table-cell;
					vertical-align: middle;
					position: relative;
					margin: 0;
					border-left: 25px solid transparent;

					a {
						position: static;

						&:before, 
						&:after {
							bottom: 0;
						}
					}
				}
			}
		}

		&:after {
			display: block; // Clearfix
		}
	}
}

@media #{$bp-3} {
	body:not(.has-scrolled) #header {
		height: 100px;
		padding-top: 0;
		padding-bottom: 0;

		h1, 
		p.logo {
			a {
				small {
					max-height: 30px;
				}
			}
		}
	}
}

// Another new version
@media #{$bp-3} {
	#header {
		div.widget_nav_menu {
			ul {
				margin-right: -12.5px;

				li {
					border: 0;

					a {
						padding: 0 12.5px;

						&:before, 
						&:after {
						//	display: none;
						}
					}

					background: rgba(0, 20, 40, 0);
					transition: background .1s ease-out;

					// Hover
					&:hover, 
					&.active {
						background: rgba(0, 20, 40, .4);
						box-shadow: inset 1px 1px 1px $shadow-color;

						a {
							color: $white-color;
						}
					}
				}
			}
		}
	}
}
