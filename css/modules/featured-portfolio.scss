#featured-portfolio {
	background: $dark-blue-bg;
	position: relative;
	color: $white-color;

	padding: 0; // General layout makes this a section - undo
	margin: 0;
	margin-top: -$margin-top-bp1;

	@media #{$bp-3} {
		margin-top: -$margin-top-bp3;
	}

	@include hero-shadow;

	// Each portfolio item
	article {
		@include section($dark-blue-bg);

		position: relative;
		overflow: hidden;

		padding-top: $h1-pos-bp1 - 100px; // 100px margin-top of h2 (project title)

		@media #{$bp-3} {
			padding-top: $h1-pos-bp3 - 100px;
		}

		// Images
		// First (Desktop) image as background
		figure {
			margin: 0;
		}

		figure:first-child {
			position: absolute;
			left: 0;
			top: 0;

			width: 100%;
			height: 100%;

			img {
				@include hero-img(true);
			}
		}

		// Potential low-res images (tablet/phone)
		figure + figure {
			@include device(280px);

			float: right;
			margin-bottom: -300px;
			margin-left: $margin * 2;

			// Scroll the img (website screenshot) on hover
			img {
				transition: transform 12s linear, top 12s linear;
				position: relative;
				top: 0;
			}

			&:hover img {
				top: 100%;
				transform: translateY(-100%);
			}

			// Don't show the phone on phones :P
			@media #{$bp-4-max} {
				display: none;
			}
		}

		// Position text etc on top of image
		* {
			position: relative;
		}

		// Project title
		h2 {
			@include hero-title;
			@include heading-size($h1-size);
			@include ellipsis;

			margin-top: 100px;
			margin-bottom: 0;
		}

		// Tags/technologies used
		ul {

		}

		// Description
		ul + p {
			@include first-p-hero;
		}

		// CTA
		p:last-child {
			margin-left: -10px; // Compensate for button margin

			a {
				margin: 0 10px 10px;
			}
		}
	}
}

// Bounce animation
@mixin fp-ease-out-bounce {
	0% { transform: translateY(-100%); animation-timing-function: ease-in; }
	37% { transform: translateY(0%); animation-timing-function: ease-out; }
	55% { transform: translateY(-16%); animation-timing-function: ease-in; }
	73% { transform: translateY(0%); animation-timing-function: ease-out; }
	84% { transform: translateY(-4%); animation-timing-function: ease-in; }
	91% { transform: translateY(0%); animation-timing-function: ease-out; }
	96% { transform: translateY(-1%); animation-timing-function: ease-in; }
	100% { transform: translateY(0%); }
}

@-webkit-keyframes fp-ease-out-bounce {
	@include fp-ease-out-bounce;
}

@-moz-keyframes fp-ease-out-bounce {
	@include fp-ease-out-bounce;
}

@keyframes fp-ease-out-bounce {
	@include fp-ease-out-bounce;
}

// "Slideshow" code
#featured-portfolio {
	position: relative;
	overflow: hidden;

	min-height: 550px;

	// Every item starts above
	article {
		position: absolute;
		left: 0;
		top: 0;

		width: 100%;
		height: 100%;
		box-sizing: border-box;

		transform: translateY(-100%);
		transition: transform .2s ease-out;
	//	transition: transform 0 .6s;
	}

	// The active item gets pushed down (TODO: Prevent first item from animating onload + fix last item/first item animation (z-index))
	article.active, 
	article:first-child, 
	&.loaded article.active:first-child {
		transform: translateY(0);
	/*	-webkit-animation-name: fp-ease-out-bounce;
		-moz-animation-name: fp-ease-out-bounce;
		animation-name: fp-ease-out-bounce;

		-webkit-animation-duration: .6s;
		-moz-animation-duration: .6s;
		animation-duration: .6s;

		transform: translateY(0); */
	}

	&.loaded article:first-child {
		transform: translateY(-100%);
	}

	> a.next {
		@include icon($fa-var-arrow-down, before);
		@include icon-only();

		display: block;
		width: 40px;
		height: 40px;

		position: absolute;
		left: 50%;
		bottom: $margin;
		z-index: 99;

		margin-left: -25px;

		text-align: center;
		line-height: 40px;
		color: $white-color;

		border: 5px solid $white-color;
		border-radius: 100%;

		transition: opacity .2s ease-out, transform .2s ease-out;
		opacity: .2;

		&:hover {
			transform: scale(1.1);
			opacity: .8;
		}
	}
}
